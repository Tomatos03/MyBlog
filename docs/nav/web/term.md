# Web 术语

## Cookie

Cookie 是一种浏览器的缓存机制，在不同的域名下存储了不同的 cookie，当发送请求的时候会将该域名下的 cookie 存储的信息一起发送到服务器之之中。下面是一张浏览器存储 Cookie 的截图：

![image-20250429150744738](./assets/image-20250429150744738.png)

Cookie 存储的一些元数据信息可以参考下表：

| 字段名       | 是否必须 | 示例值                          | 说明                                                         |
| ------------ | -------- | ------------------------------- | ------------------------------------------------------------ |
| `Name=Value` | ✅ 是    | `login_user=Tomatos`            | Cookie 的键值对内容，必须有，值是字符串                      |
| `Path`       | ❌ 否    | `/`                             | 表示此 Cookie 对哪个路径有效，默认为当前路径                 |
| `Domain`     | ❌ 否    | `.example.com`                  | 指定可以接收此 Cookie 的域名，默认是当前域                   |
| `Expires`    | ❌ 否    | `Wed, 01 May 2025 12:00:00 GMT` | 设置 Cookie 的过期时间（绝对时间）                           |
| `Max-Age`    | ❌ 否    | `86400`（单位：秒）             | 设置 Cookie 的有效期（相对时间），优先于 `Expires`           |
| `Secure`     | ❌ 否    | 无值（只要写上即可）            | 表示此 Cookie 只会在 HTTPS 请求中发送                        |
| `HttpOnly`   | ❌ 否    | 无值                            | 表示此 Cookie 无法被 JavaScript 访问（如 `document.cookie`） |
| `SameSite`   | ❌ 否    | `Strict` / `Lax` / `None`       | 控制跨站请求时是否携带 Cookie，用于防范 CSRF                 |

**注：**Cookie 存储在浏览器(客户端)之中

## Session

Session 指的是维持客户端与服务端会话的一种机制。

常见的 Session 实现如下：

1. 客户端浏览器发起登陆请求

2. 登陆成功后，服务端会把用户信息保存在服务端，并返回一个唯一的 session 标识（标识并不唯一具体由服务器决定）给客户端浏览器。

3. 客户端浏览器会把这个唯一的 session 标识保存在起来

4. 再次访问 web 应用时，客户端浏览器会把这个唯一的 session 标识带上，这样服务端就能根据这个唯一 session 标识找到对应用户

**注：**Session 可以通过 Cookie 实现，也可以通过别的手段实现

## Cookie 与 Session 对比

| 特性     | Cookie                           | Session                        |
| -------- | -------------------------------- | ------------------------------ |
| 存储位置 | 客户端浏览器                     | 服务器内存                     |
| 安全性   | 较低，可被客户端查看和修改       | 较高，存储在服务器             |
| 生命周期 | 可持久化存储                     | 默认为会话级，可配置超时时间   |
| 存储容量 | 有限(通常 4KB)                   | 较大(受服务器内存限制)         |
| 性能     | 每次请求都会传输                 | 只传输会话标识符               |
| 适用场景 | 记住用户名、主题偏好等非敏感信息 | 用户认证状态、购物车等敏感数据 |

## CSRF

跨站请求伪造（Cross-Site Request Forgery）

一个经典的 CSRF 例子如下：

1. 用户 A 登录了银行相关网站，关闭了网站但是并没有退出用户

2. 用户 A 访问了另一个钓鱼网站，其中有一个按钮伪装了一个段表单，表单指向你之前访问的银行相关网站

3. 点击按钮后会携带你刚刚保存了 cookie，拿到 cookie 后可以通过里面存储的 session 唯一标识成功访问你之前登录的银行相关网站进行敏感的高危操作。
